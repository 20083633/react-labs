(this.webpackJsonppizzapal=this.webpackJsonppizzapal||[]).push([[1],{107:function(e,t,n){"use strict";var c=n(145),i=n.n(c).a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL});t.a=i},108:function(e,t,n){"use strict";var c=n(20),i=n(0),o=n.n(i),r=n(66),a=n(194),s=n(2);t.a=function(e){var t=o.a.useState(!!e.error),n=Object(c.a)(t,2),i=n[0],l=n[1];return Object(s.jsxs)(r.a,{onClose:function(){return l(!1)},onOpen:function(){return l(!0)},open:i,children:[Object(s.jsx)(r.a.Header,{children:"Something went wrong"}),Object(s.jsx)(r.a.Content,{children:Object(s.jsx)(r.a.Description,{children:Object(s.jsx)("p",{children:e.error})})}),Object(s.jsx)(r.a.Actions,{children:Object(s.jsx)(a.a,{content:"Okay",onClick:function(){e.onClear(),l(!1)},color:"red"})})]})}},160:function(e,t,n){},168:function(e,t,n){},192:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),o=n(47),r=n.n(o),a=(n(160),n(26)),s=(n(161),n(20)),l=n(68),d=n(207),j=n(10),u=(n(168),n(51)),p=n(208),b=n.p+"static/media/logo.a8255238.png",h=n(2),g=function(e){var t=Object(c.useContext)(u.a);return Object(h.jsxs)(p.a,{color:"red",stackable:!0,inverted:!0,children:[Object(h.jsx)(p.a.Item,{children:Object(h.jsx)("img",{src:b,alt:"Pizza Pal Logo"})}),Object(h.jsx)(p.a.Item,{as:a.c,to:"/",exact:!0,children:"Pizza Pal"}),t.isLoggedIn&&Object(h.jsx)(p.a.Item,{as:a.c,to:"/orders/".concat(t.userId),children:"Your Orders"}),t.isLoggedIn&&Object(h.jsx)(p.a.Item,{as:a.c,to:"/users/".concat(t.userId),children:"Your Account"}),!t.isLoggedIn&&Object(h.jsx)(p.a.Menu,{position:"right",children:Object(h.jsx)(p.a.Item,{as:a.c,to:"/authenticate",children:"Signup/Login"})}),t.isLoggedIn&&Object(h.jsx)(p.a.Menu,{position:"right",children:Object(h.jsx)(p.a.Item,{as:a.b,to:"/",onClick:t.logout,children:"Log out"})})]})},O=n(96),x=n(210),m=n(107),f=n(195),v=n(104),C=n(146),S=n(92),T=function(e){return Object(h.jsxs)(x.a.Column,{mobile:4,computer:2,textAlign:"center",children:[Object(h.jsx)(C.a,{src:e.image,alt:e.alt,size:"tiny",centered:!0}),Object(h.jsxs)(S.a,{pointing:!0,children:["\u20ac ",e.price.toFixed(2)," "]})]})},I=function(e){return Object(h.jsxs)(x.a.Column,{width:12,children:[Object(h.jsx)(f.a,{color:"red",children:Object(h.jsx)(v.a,{as:"h2",textAlign:"center",color:"red",children:"Pizza Pal Menu"})}),Object(h.jsx)(x.a,{children:e.menu.map((function(e,t){return Object(h.jsx)(T,{image:e.image,alt:e.alt,price:e.price},e.id)}))})]})},P=n(196),k=n(194),z=n(44),L=function(e){return Object(h.jsxs)(x.a.Column,{mobile:4,computer:2,textAlign:"center",children:[Object(h.jsx)("p",{children:e.alt}),Object(h.jsxs)(k.a.Group,{size:"mini",children:[Object(h.jsx)(k.a,{color:"green",icon:!0,onClick:e.added,children:Object(h.jsx)(z.a,{name:"plus"})}),Object(h.jsx)(k.a,{color:"red",icon:!0,onClick:e.removed,children:Object(h.jsx)(z.a,{name:"minus"})})]})]})},A=function(e){return Object(h.jsxs)(x.a.Column,{width:8,children:[Object(h.jsx)(v.a,{as:"h2",textAlign:"center",className:"step",children:"Step 1: Choose your toppings"}),Object(h.jsx)(x.a,{children:e.menu.map((function(t,n){return Object(h.jsx)(L,{alt:t.alt,added:function(){return e.toppingAdded(t.id)},removed:function(){return e.toppingRemoved(t.id)}},t.id)}))})]})},y=n(76),R=n(66),F=function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),i=n[0],o=n[1];return Object(h.jsxs)(R.a,{onClose:function(){return o(!1)},onOpen:function(){return o(!0)},open:i,trigger:Object(h.jsx)(k.a,{color:"green",size:"large",children:"Order Now!"}),children:[Object(h.jsx)(R.a.Header,{children:"Confirm your choices:"}),Object(h.jsx)(R.a.Content,{children:Object(h.jsx)(y.a,{menu:e.menu,toppings:e.toppings,price:e.price})}),Object(h.jsxs)(R.a.Actions,{children:[Object(h.jsx)(k.a,{color:"red",onClick:function(){return o(!1)},children:"Go Back"}),Object(h.jsx)(k.a,{color:"green",disabled:e.disabled,onClick:function(){e.checkout(),o(!1)},children:"Check out"})]})]})},w=function(e){return Object(h.jsxs)(x.a.Column,{width:6,textAlign:"right",children:[Object(h.jsx)(v.a,{as:"h2",textAlign:"center",className:"step",children:"Step 2: Check out"}),Object(h.jsx)(y.a,{menu:e.menu,toppings:e.toppings,price:e.price}),Object(h.jsx)(F,{menu:e.menu,toppings:e.toppings,price:e.price,checkout:e.checkout,disabled:e.disabled})]})},E=function(e){var t=!Object(c.useContext)(u.a).isLoggedIn;return Object(h.jsx)(x.a.Row,{children:Object(h.jsxs)(P.a.Dimmable,{as:x.a,blurring:!0,dimmed:t,children:[Object(h.jsxs)(x.a.Row,{columns:2,centered:!0,children:[Object(h.jsx)(A,{menu:e.menu,toppingAdded:e.toppingAdded,toppingRemoved:e.toppingRemoved}),Object(h.jsx)(w,{menu:e.menu,toppings:e.chosenToppings,price:e.totalPrice,checkout:e.checkout,disabled:e.disabled})]}),Object(h.jsxs)(P.a,{active:t,children:[Object(h.jsx)(v.a,{as:"h2",inverted:!0,children:"Log in to start creating your pizza!"}),Object(h.jsx)(k.a,{as:a.b,to:"/authenticate",color:"red",size:"large",children:"Signup/Login"})]})]})})},_=n(108),D=function(e){var t=Object(c.useState)({toppings:[]}),n=Object(s.a)(t,2),i=n[0],o=n[1],r=Object(c.useState)({error:!1,errorMessage:null}),a=Object(s.a)(r,2),d=a[0],j=a[1],u=Object(c.useState)({isLoading:!0,loadFailed:!1}),p=Object(s.a)(u,2),b=p[0],g=p[1];Object(c.useEffect)((function(){m.a.get("/").then((function(e){var t=e.data.toppings.sort((function(e,t){return e.id-t.id}));o({toppings:t})})).catch((function(e){var t="";t=e.response?e.response.data.message:"There was a problem fetching the menu",j({error:!0,errorMessage:t}),g({isLoading:!1,loadFailed:i.loadFailed}),console.log(e.response)}))}),[]);var f=Object(c.useState)({totalPrice:e.location.state?e.location.state.order.totalPrice:5,chosenToppings:e.location.state?e.location.state.order.chosenToppings:[]}),v=Object(s.a)(f,2),C=v[0],S=v[1],T=!0;C.chosenToppings.length>0&&(T=!1);var P=d.error?Object(h.jsx)(_.a,{error:d.errorMessage,onClear:function(){j({error:!1,errorMessage:null}),g({isLoading:!1,loadFailed:!0})}}):Object(h.jsx)(l.a,{active:b.isLoading});return i.toppings.length>0?P=Object(h.jsxs)(x.a,{divided:"vertically",stackable:!0,children:[Object(h.jsx)(x.a.Row,{centered:!0,children:Object(h.jsx)(I,{menu:i.toppings})}),Object(h.jsx)(E,{menu:i.toppings,toppingAdded:function(e){var t=Object(O.a)({},C),n=i.toppings.findIndex((function(t){return t.id===e})),c=t.chosenToppings.findIndex((function(t){return t.id===e}));if(c>-1)t.chosenToppings[c].count++;else{var o={id:i.toppings[n].id,name:i.toppings[n].alt,price:i.toppings[n].price,count:1};t.chosenToppings.push(o)}var r=C.totalPrice+i.toppings[n].price;S({totalPrice:r,chosenToppings:t.chosenToppings})},toppingRemoved:function(e){var t=Object(O.a)({},C),n=t.chosenToppings.findIndex((function(t){return t.id===e})),c=t.totalPrice;n>=0&&(c-=t.chosenToppings[n].price,t.chosenToppings[n].count--,t.chosenToppings[n].count<1&&t.chosenToppings.splice(n,1)),S({totalPrice:c,chosenToppings:t.chosenToppings})},chosenToppings:C.chosenToppings,totalPrice:C.totalPrice,checkout:function(){e.history.push({pathname:"place-order",state:{order:C,menu:i.toppings}})},disabled:T})]}):b.loadFailed&&(P=Object(h.jsx)("p",{children:"We're having some issues loading the menu... Please try again later."})),Object(h.jsx)("div",{children:P})},N=i.a.lazy((function(){return n.e(9).then(n.bind(null,231))})),M=i.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,232))})),B=i.a.lazy((function(){return n.e(6).then(n.bind(null,225))})),H=i.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,226))})),J=i.a.lazy((function(){return n.e(4).then(n.bind(null,233))})),K=i.a.lazy((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,227))})),U=function(e){var t,n=Object(c.useState)({isLoggedIn:!1}),i=Object(s.a)(n,2),o=(i[0],i[1],Object(c.useState)(!1)),r=Object(s.a)(o,2),a=r[0],p=r[1],b=Object(c.useState)(!1),O=Object(s.a)(b,2),x=O[0],m=O[1],f=j.f,v=Object(c.useCallback)((function(e,t){p(t),m(e),localStorage.setItem("userData",JSON.stringify({userId:e,token:t}))}),[]),C=Object(c.useCallback)((function(){p(null),m(null),localStorage.removeItem("userData"),f.push("/")}),[]);return Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&v(e.userId,e.token)}),[v]),t=a?Object(h.jsxs)(j.c,{children:[Object(h.jsx)(j.a,{path:"/",exact:!0,component:D}),Object(h.jsx)(j.a,{path:"/orders/:uid",component:N}),Object(h.jsx)(j.a,{path:"/place-order",component:M}),Object(h.jsx)(j.a,{path:"/order-success",component:B}),Object(h.jsx)(j.a,{path:"/users/:uid",component:J}),Object(h.jsx)(j.a,{path:"/update-account",component:K})]}):Object(h.jsxs)(j.c,{children:[Object(h.jsx)(j.a,{path:"/",exact:!0,component:D}),Object(h.jsx)(j.a,{path:"/authenticate",component:H})]}),Object(h.jsx)(u.a.Provider,{value:{isLoggedIn:!!a,token:a,userId:x,login:v,logout:C},children:Object(h.jsxs)(d.a,{children:[Object(h.jsx)(g,{}),Object(h.jsx)(c.Suspense,{fallback:Object(h.jsx)("div",{children:Object(h.jsx)(l.a,{active:"true"})}),children:t})]})})};var W=function(){return Object(h.jsx)(a.a,{children:Object(h.jsx)(U,{})})},Y=function(e){e&&e instanceof Function&&n.e(10).then(n.bind(null,228)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),o(e),r(e)}))};r.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(W,{})}),document.getElementById("root")),Y()},51:function(e,t,n){"use strict";var c=n(0),i=Object(c.createContext)({isLoggedIn:!1,login:function(){},logout:function(){}});t.a=i},68:function(e,t,n){"use strict";n(0);var c=n(195),i=n(196),o=n(193),r=n(2);t.a=function(e){return Object(r.jsx)(c.a,{children:Object(r.jsx)(i.a,{active:e.active,inverted:!0,children:Object(r.jsx)(o.a,{size:"large",children:"Loading"})})})}},76:function(e,t,n){"use strict";n(0);var c=n(104),i=n(147),o=n(2);t.a=function(e){var t=null;return t=e.toppings.length>0?Object(o.jsxs)("div",{children:[Object(o.jsx)(c.a,{as:"h3",children:"Your Pizza:"}),Object(o.jsx)(i.a,{divided:!0,verticalAlign:"middle",children:e.toppings.map((function(e){return Object(o.jsxs)(i.a.Item,{children:[e.name,": ",e.count]},e.id)}))}),Object(o.jsxs)(c.a,{as:"h4",className:"h4margin",children:["Total Price: \u20ac ",e.price.toFixed(2)]})]}):Object(o.jsx)("div",{children:Object(o.jsx)(c.a,{as:"h4",className:"h4margin",children:"Start adding some toppings!"})}),Object(o.jsx)("div",{children:t})}}},[[192,2,3]]]);
//# sourceMappingURL=main.66c5fd1f.chunk.js.map